{"version":17,"variables":[],"tiles":{"0":{"type":"data","title":"Cloud provider error /s","query":"timeseries avg(karpenter_cloudprovider_errors_total, rate: 1s)\n| fieldsAdd karpenter_cloudprovider_errors_total = \"avg(karpenter_cloudprovider_errors_total, rate:1s)\"\n| fieldsAdd value.A = arrayAvg(`avg(karpenter_cloudprovider_errors_total, rate:1s)`)\n| limit 20","queryConfig":{"version":"11.6.0","subQueries":[{"id":"A","isEnabled":true,"limit":20,"filter":"","datatype":"metrics","metric":{"key":"karpenter_cloudprovider_errors_total","aggregation":"avg"},"by":[],"rate":"1s"}]},"subType":"dql-builder-metrics","visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["karpenter_cloudprovider_errors_total"],"valueAxis":["value.A"],"categoryAxisLabel":"karpenter_cloudprovider_errors_total","valueAxisLabel":"value.A","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg(karpenter_cloudprovider_errors_total, rate:1s)"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["value.A"],"leftYAxisSettings":{}},"singleValue":{"showLabel":true,"label":"cpu requested","prefixIcon":"","recordField":"avg(karpenter_nodes_total_pod_requests)","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["avg(karpenter_cloudprovider_errors_total, rate:1s)"],"value":"sparkline","id":1733219539669}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["karpenter_cloudprovider_errors_total"],"dataMappings":{"value":"value.A"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"value.A","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["karpenter_cloudprovider_errors_total"]},"autoSelectVisualization":false},"davis":{},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"1":{"type":"data","title":"Memory requested in NodePool","query":"timeseries avg(karpenter_nodes_total_pod_requests), by: { nodepool }, filter: { matchesValue(resource_type, \"memory\") }\n| fieldsAdd `avg(karpenter_nodes_total_pod_requests)` = arrayLast(`avg(karpenter_nodes_total_pod_requests)`)\n| limit 20","queryConfig":{"version":"11.6.0","subQueries":[{"id":"A","isEnabled":true,"limit":20,"filter":"resource_type = memory  ","datatype":"metrics","metric":{"key":"karpenter_nodes_total_pod_requests","aggregation":"avg"},"by":["nodepool"],"convertToValue":"Last"}]},"subType":"dql-builder-metrics","visualization":"honeycomb","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["nodepool"],"valueAxis":["avg(karpenter_nodes_total_pod_requests)"],"categoryAxisLabel":"nodepool","valueAxisLabel":"avg(karpenter_nodes_total_pod_requests)","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","fieldMapping":{"timestamp":"timeframe","leftAxisValues":["interval"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["value.A"],"leftYAxisSettings":{}},"singleValue":{"showLabel":true,"label":"Memory requested","prefixIcon":"","recordField":"avg(karpenter_nodes_total_pod_requests)","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["nodepool"],"dataMappings":{"value":"avg(karpenter_nodes_total_pod_requests)"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"orange-blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"avg(karpenter_nodes_total_pod_requests)","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["nodepool"]},"autoSelectVisualization":false},"davis":{},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"2":{"type":"data","title":"Number of pods requested in NodePool","query":"timeseries avg(karpenter_nodes_total_pod_requests), by: { nodepool }, filter: { matchesValue(resource_type, \"pods\") }\n| fieldsAdd `avg(karpenter_nodes_total_pod_requests)` = arrayLast(`avg(karpenter_nodes_total_pod_requests)`)\n| limit 20","queryConfig":{"version":"11.6.0","subQueries":[{"id":"A","isEnabled":true,"limit":20,"filter":"resource_type = pods ","datatype":"metrics","metric":{"key":"karpenter_nodes_total_pod_requests","aggregation":"avg"},"by":["nodepool"],"convertToValue":"Last"}]},"subType":"dql-builder-metrics","visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["nodepool"],"valueAxis":["avg(karpenter_nodes_total_pod_requests)"],"categoryAxisLabel":"nodepool","valueAxisLabel":"avg(karpenter_nodes_total_pod_requests)","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","fieldMapping":{"timestamp":"timeframe","leftAxisValues":["interval"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["value.A"],"leftYAxisSettings":{}},"singleValue":{"showLabel":false,"label":"number of pods","prefixIcon":"","recordField":"avg(karpenter_nodes_total_pod_requests)","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["nodepool"],"dataMappings":{"value":"avg(karpenter_nodes_total_pod_requests)"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"avg(karpenter_nodes_total_pod_requests)","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["nodepool"]},"autoSelectVisualization":false},"davis":{},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"4":{"type":"data","title":"AWS SDK duration","query":"timeseries avg(aws_sdk_go_request_duration_seconds), by: { action }\n| fieldsAdd value.A = arrayAvg(`avg(aws_sdk_go_request_duration_seconds)`)\n| limit 20","queryConfig":{"version":"11.6.0","subQueries":[{"id":"A","isEnabled":true,"limit":20,"filter":"","datatype":"metrics","metric":{"key":"aws_sdk_go_request_duration_seconds","aggregation":"avg"},"by":["action"]}]},"subType":"dql-builder-metrics","visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["action"],"valueAxis":["value.A"],"categoryAxisLabel":"action","valueAxisLabel":"value.A","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg(aws_sdk_go_request_duration_seconds)"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["value.A"],"leftYAxisSettings":{"isLabelVisible":true,"label":"aws_sdk_go_request_duration_seconds"}},"singleValue":{"showLabel":true,"label":"error","prefixIcon":"","recordField":"error","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["avg(aws_sdk_go_request_duration_seconds)"],"value":"sparkline","id":1733217035157}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["action"],"dataMappings":{"value":"value.A"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"value.A","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["action"]},"autoSelectVisualization":true},"davis":{},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"6":{"type":"markdown","title":"","content":"**Cloud Provider**"},"8":{"type":"markdown","title":"","content":" **Disruption**"},"10":{"type":"data","title":"voluntary disruptions nodes","query":"timeseries avg(karpenter_voluntary_disruption_eligible_nodes, rate: 1s), by: { reason }\n| fieldsAdd value.A = arrayAvg(`avg(karpenter_voluntary_disruption_eligible_nodes, rate:1s)`)\n| limit 20","queryConfig":{"version":"11.6.0","subQueries":[{"id":"A","isEnabled":true,"limit":20,"filter":"","datatype":"metrics","metric":{"key":"karpenter_voluntary_disruption_eligible_nodes","aggregation":"avg"},"by":["reason"],"rate":"1s"}]},"subType":"dql-builder-metrics","visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxisLabel":"reason","valueAxisLabel":"value.A","tooltipVariant":"single","categoryAxis":["reason"],"valueAxis":["value.A"]},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["value.A"],"leftYAxisSettings":{},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg(karpenter_voluntary_disruption_eligible_nodes, rate:1s)"]}},"singleValue":{"showLabel":true,"label":"error","prefixIcon":"","recordField":"error","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["avg(karpenter_voluntary_disruption_eligible_nodes, rate:1s)"],"value":"sparkline","id":1733162052938}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["reason"],"dataMappings":{"value":"value.A"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"value.A","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["reason"]},"autoSelectVisualization":true},"davis":{},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"11":{"type":"data","title":"Nodepool memory usage","query":"timeseries avg(karpenter_nodepools_usage), by: { nodepool }, filter: { matchesValue(resource_type, \"memory\") }\n| fieldsAdd value.A = arrayAvg(`avg(karpenter_nodepools_usage)`)\n| limit 20","queryConfig":{"version":"11.6.0","subQueries":[{"id":"A","isEnabled":true,"limit":20,"filter":"resource_type = memory  ","datatype":"metrics","metric":{"key":"karpenter_nodepools_usage","aggregation":"avg"},"by":["nodepool"]}]},"subType":"dql-builder-metrics","visualization":"honeycomb","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["nodepool"],"valueAxis":["value.A"],"categoryAxisLabel":"nodepool","valueAxisLabel":"value.A","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg(karpenter_nodepools_usage)"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["value.A"],"leftYAxisSettings":{}},"singleValue":{"showLabel":true,"label":"Memory","prefixIcon":"","recordField":"value.A","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["avg(karpenter_nodepools_usage)"],"value":"sparkline","id":1733217446215}]},"honeycomb":{"shape":"hexagon","min":null,"max":null,"legend":{"hidden":false,"position":"bottom"},"displayedFields":["nodepool"],"dataMappings":{"value":"value.A"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"orange-blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"value.A","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["nodepool"]},"autoSelectVisualization":false},"davis":{},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"12":{"type":"data","title":"allowed disruptions","query":"timeseries avg(karpenter_nodepools_allowed_disruptions), by: { nodepool }\n| fieldsAdd value.A = arrayAvg(`avg(karpenter_nodepools_allowed_disruptions)`)\n| limit 20","queryConfig":{"version":"11.6.0","subQueries":[{"id":"A","isEnabled":true,"limit":20,"filter":"","datatype":"metrics","metric":{"key":"karpenter_nodepools_allowed_disruptions","aggregation":"avg"},"by":["nodepool"]}]},"subType":"dql-builder-metrics","visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["nodepool"],"valueAxis":["value.A"],"categoryAxisLabel":"nodepool","valueAxisLabel":"value.A","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg(karpenter_nodepools_allowed_disruptions)"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["value.A"],"leftYAxisSettings":{}},"singleValue":{"showLabel":true,"label":"allowed disruptions","prefixIcon":"","recordField":"value.A","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["avg(karpenter_nodepools_allowed_disruptions)"],"value":"sparkline","id":1733217550199}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["nodepool"],"dataMappings":{"value":"value.A"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"value.A","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["nodepool"]},"autoSelectVisualization":false},"davis":{},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"13":{"type":"data","title":"Cloud provider duration per type of operation","query":"timeseries avg(karpenter_cloudprovider_duration_seconds), by: { provider, method }\n| fieldsAdd value.A = arrayAvg(`avg(karpenter_cloudprovider_duration_seconds)`)\n| limit 20","queryConfig":{"version":"11.6.0","subQueries":[{"id":"A","isEnabled":true,"limit":20,"filter":"","datatype":"metrics","metric":{"key":"karpenter_cloudprovider_duration_seconds","aggregation":"avg"},"by":["provider","method"]}]},"subType":"dql-builder-metrics","visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxisLabel":"provider,method","valueAxisLabel":"value.A","tooltipVariant":"single","categoryAxis":["provider","method"],"valueAxis":["value.A"]},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["value.A"],"leftYAxisSettings":{"isLabelVisible":true,"label":"karpenter_cloudprovider_duration_seconds"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg(karpenter_cloudprovider_duration_seconds)"]}},"singleValue":{"showLabel":true,"label":"error","prefixIcon":"","recordField":"error","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["avg(karpenter_cloudprovider_duration_seconds)"],"value":"sparkline","id":1733162045430}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["provider","method"],"dataMappings":{"value":"value.A"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"value.A","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["provider","method"]},"autoSelectVisualization":true},"davis":{},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"14":{"type":"data","title":"Nodepool cpu usage","query":"timeseries avg(karpenter_nodepools_usage), by: { nodepool }, filter: { matchesValue(resource_type, \"cpu\") }\n| fieldsAdd value.A = arrayAvg(`avg(karpenter_nodepools_usage)`)\n| limit 20","queryConfig":{"version":"11.6.0","subQueries":[{"id":"A","isEnabled":true,"limit":20,"filter":"resource_type = cpu ","datatype":"metrics","metric":{"key":"karpenter_nodepools_usage","aggregation":"avg"},"by":["nodepool"]}]},"subType":"dql-builder-metrics","visualization":"honeycomb","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["nodepool"],"valueAxis":["value.A"],"categoryAxisLabel":"nodepool","valueAxisLabel":"value.A","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg(karpenter_nodepools_usage)"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["value.A"],"leftYAxisSettings":{}},"singleValue":{"showLabel":true,"label":"cpu","prefixIcon":"","recordField":"value.A","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["avg(karpenter_nodepools_usage)"],"value":"sparkline","id":1733217332252}]},"honeycomb":{"shape":"hexagon","min":null,"max":null,"legend":{"hidden":false,"position":"bottom"},"displayedFields":["nodepool"],"dataMappings":{"value":"value.A"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"value.A","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["nodepool"]},"autoSelectVisualization":false},"davis":{},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"15":{"type":"data","title":"interruption received message","query":"timeseries avg(karpenter_interruption_received_messages_total, rate: 1s), by: { message_type }\n| fieldsAdd value.A = arrayAvg(`avg(karpenter_interruption_received_messages_total, rate:1s)`)\n| limit 20","queryConfig":{"version":"11.6.0","subQueries":[{"id":"A","isEnabled":true,"limit":20,"filter":"","datatype":"metrics","metric":{"key":"karpenter_interruption_received_messages_total","aggregation":"avg"},"by":["message_type"],"rate":"1s"}]},"subType":"dql-builder-metrics","visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxisLabel":"message_type","valueAxisLabel":"value.A","tooltipVariant":"single","categoryAxis":["message_type"],"valueAxis":["value.A"]},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["value.A"],"leftYAxisSettings":{},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg(karpenter_interruption_received_messages_total, rate:1s)"]}},"singleValue":{"showLabel":true,"label":"error","prefixIcon":"","recordField":"error","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["avg(karpenter_interruption_received_messages_total, rate:1s)"],"value":"sparkline","id":1733162052978}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["message_type"],"dataMappings":{"value":"value.A"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"value.A","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["message_type"]},"autoSelectVisualization":true},"davis":{},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"16":{"type":"data","title":"voluntary disruptions deleted message per second","query":"timeseries avg(karpenter_interruption_deleted_messages_total, rate: 1s)\n| fieldsAdd karpenter_interruption_deleted_messages_total = \"avg(karpenter_interruption_deleted_messages_total, rate:1s)\"\n| fieldsAdd value.A = arrayAvg(`avg(karpenter_interruption_deleted_messages_total, rate:1s)`)\n| limit 20","queryConfig":{"version":"11.6.0","subQueries":[{"id":"A","isEnabled":true,"limit":20,"filter":"","datatype":"metrics","metric":{"key":"karpenter_interruption_deleted_messages_total","aggregation":"avg"},"by":[],"rate":"1s"}]},"subType":"dql-builder-metrics","visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxisLabel":"karpenter_interruption_deleted_messages_total","valueAxisLabel":"value.A","tooltipVariant":"single","categoryAxis":["karpenter_interruption_deleted_messages_total"],"valueAxis":["value.A"]},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["value.A"],"leftYAxisSettings":{},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg(karpenter_interruption_deleted_messages_total, rate:1s)"]}},"singleValue":{"showLabel":true,"label":"error","prefixIcon":"","recordField":"error","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["avg(karpenter_interruption_deleted_messages_total, rate:1s)"],"value":"sparkline","id":1732889763760}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["karpenter_interruption_deleted_messages_total"],"dataMappings":{"value":"value.A"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"value.A","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["karpenter_interruption_deleted_messages_total"]},"autoSelectVisualization":true},"davis":{},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"17":{"type":"data","title":"worker queue depth","query":"timeseries sum(karpenter_workqueue_depth), by: { name }\n| fieldsAdd value.A = arrayAvg(`sum(karpenter_workqueue_depth)`)\n| limit 20","queryConfig":{"version":"11.6.0","subQueries":[{"id":"A","isEnabled":true,"limit":20,"filter":"","datatype":"metrics","metric":{"key":"karpenter_workqueue_depth","aggregation":"sum"},"by":["name"]}]},"subType":"dql-builder-metrics","visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxisLabel":"name","valueAxisLabel":"value.A","tooltipVariant":"single","categoryAxis":["name"],"valueAxis":["value.A"]},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["value.A"],"leftYAxisSettings":{},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["sum(karpenter_workqueue_depth)"]}},"singleValue":{"showLabel":true,"label":"error","prefixIcon":"","recordField":"error","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["sum(karpenter_workqueue_depth)"],"value":"sparkline","id":1732889657913}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["name"],"dataMappings":{"value":"value.A"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"value.A","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["name"]},"autoSelectVisualization":true},"davis":{},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"18":{"type":"data","title":"karpenter events","query":" fetch logs\n| filter k8s.namespace.name == \"karpenter\"\n| parse log, \"JSON:log_karpenter\"\n| fieldsAdd message= log_karpenter[message], controller= log_karpenter[controller],karpentertime= log_karpenter[time], logger= log_karpenter[logger], karpenter_level= log_karpenter[level], karpenter_time= log_karpenter[time], source= log_karpenter[source], controllerGroup= log_karpenter[controllerGroup], error=log_karpenter[error], duration= log_karpenter[duration]\n| fieldsRemove log_karpenter\n| parse log, \"BOS LD 'worker count' LD  INT:workercount LD   EOS\"\n| fields time=toTimestamp(karpentertime),message, controller, error\n| sort time  desc","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["message","controller"],"categoryAxisLabel":"message,controller","valueAxis":[],"valueAxisLabel":"","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisLabel":"time","xAxisIsLabelVisible":false,"hiddenLegendFields":[],"leftYAxisSettings":{}},"singleValue":{"showLabel":true,"label":"message","prefixIcon":"","recordField":"message","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":true,"monospacedFontColumns":[],"columnWidths":{"[\"message\"]":257.890625},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["message","controller","error"],"dataMappings":{"value":"message"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle","displayedFields":["message","controller"]},"autoSelectVisualization":false},"visualization":"table","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"20":{"type":"data","title":"Number of Nodes","query":"timeseries avg(karpenter_cluster_state_node_count)\n| fieldsAdd karpenter_cluster_state_node_count = \"avg(karpenter_cluster_state_node_count)\"\n| fieldsAdd value.A = arrayAvg(`avg(karpenter_cluster_state_node_count)`)\n| limit 20","queryConfig":{"version":"11.6.0","subQueries":[{"id":"A","isEnabled":true,"limit":20,"filter":"","datatype":"metrics","metric":{"key":"karpenter_cluster_state_node_count","aggregation":"avg"}}]},"subType":"dql-builder-metrics","visualization":"areaChart","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["karpenter_cluster_state_node_count"],"categoryAxisLabel":"karpenter_cluster_state_node_count","valueAxis":["value.A"],"valueAxisLabel":"value.A","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["value.A"],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg(karpenter_cluster_state_node_count)"]},"leftYAxisSettings":{"isLabelVisible":true,"label":"Kubernetes: Node count"}},"singleValue":{"showLabel":true,"label":"node_condition_ready","prefixIcon":"","recordField":"node_condition_ready","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["avg(karpenter_cluster_state_node_count)"],"value":"sparkline","id":1733219532517}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["karpenter_cluster_state_node_count"],"dataMappings":{"value":"value.A"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"value.A","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["karpenter_cluster_state_node_count"]},"autoSelectVisualization":false},"davis":{},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"21":{"type":"markdown","title":"","content":"**Karpenter events**"},"22":{"type":"data","title":"CPU requested in NodePool","query":"timeseries avg(karpenter_nodes_total_pod_requests), by: { nodepool }, filter: { matchesValue(resource_type, \"cpu\") }\n| fieldsAdd `avg(karpenter_nodes_total_pod_requests)` = arrayLast(`avg(karpenter_nodes_total_pod_requests)`)\n| limit 20","queryConfig":{"version":"11.6.0","subQueries":[{"id":"A","isEnabled":true,"limit":20,"filter":"resource_type = cpu","datatype":"metrics","metric":{"key":"karpenter_nodes_total_pod_requests","aggregation":"avg"},"by":["nodepool"],"convertToValue":"Last"}]},"subType":"dql-builder-metrics","visualization":"honeycomb","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["nodepool"],"valueAxis":["avg(karpenter_nodes_total_pod_requests)"],"categoryAxisLabel":"nodepool","valueAxisLabel":"avg(karpenter_nodes_total_pod_requests)","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","fieldMapping":{"timestamp":"timeframe","leftAxisValues":["interval"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["value.A"],"leftYAxisSettings":{}},"singleValue":{"showLabel":true,"label":"Memory requested","prefixIcon":"","recordField":"avg(karpenter_nodes_total_pod_requests)","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["nodepool"],"dataMappings":{"value":"avg(karpenter_nodes_total_pod_requests)"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"avg(karpenter_nodes_total_pod_requests)","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["nodepool"]},"autoSelectVisualization":false},"davis":{},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"23":{"type":"data","title":"karpenter scheduler simation duration","query":"timeseries avg(karpenter_scheduler_scheduling_duration_seconds), by: { controller }\n| fieldsAdd value.A = arrayAvg(`avg(karpenter_scheduler_scheduling_duration_seconds)`)\n| limit 20","queryConfig":{"version":"11.6.0","subQueries":[{"id":"A","isEnabled":true,"limit":20,"datatype":"metrics","metric":{"key":"karpenter_scheduler_scheduling_duration_seconds","aggregation":"avg"},"by":["controller"]}]},"subType":"dql-builder-metrics","visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["controller"],"categoryAxisLabel":"controller","valueAxis":["value.A"],"valueAxisLabel":"value.A","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["value.A"],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg(karpenter_scheduler_scheduling_duration_seconds)"]},"leftYAxisSettings":{"isLabelVisible":true,"label":"karpenter_scheduler_scheduling_duration_seconds"}},"singleValue":{"showLabel":true,"label":"controller","prefixIcon":"","recordField":"controller","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["avg(karpenter_scheduler_scheduling_duration_seconds)"],"value":"sparkline","id":1733218786486}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["controller"],"dataMappings":{"value":"value.A"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"value.A","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["controller"]},"autoSelectVisualization":true},"davis":{},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"24":{"type":"data","title":"Number of pods waiting to be scheduled","query":"timeseries avg(karpenter_scheduler_queue_depth), by: { controller }\n| fieldsAdd value.A = arrayAvg(`avg(karpenter_scheduler_queue_depth)`)\n| limit 20","queryConfig":{"version":"11.6.0","subQueries":[{"id":"A","isEnabled":true,"limit":20,"datatype":"metrics","metric":{"key":"karpenter_scheduler_queue_depth","aggregation":"avg"},"by":["controller"]}]},"subType":"dql-builder-metrics","visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["controller"],"categoryAxisLabel":"controller","valueAxis":["value.A"],"valueAxisLabel":"value.A","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["value.A"],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg(karpenter_scheduler_queue_depth)"]},"leftYAxisSettings":{"isLabelVisible":true,"label":"karpenter_scheduler_scheduling_duration_seconds"}},"singleValue":{"showLabel":true,"label":"controller","prefixIcon":"","recordField":"controller","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["avg(karpenter_scheduler_queue_depth)"],"value":"sparkline","id":1733219553125}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["controller"],"dataMappings":{"value":"value.A"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"value.A","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["controller"]},"autoSelectVisualization":true},"davis":{},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"25":{"type":"markdown","title":"","content":"**scheduler**"},"26":{"type":"data","title":"","query":"timeseries avg(dt.kubernetes.container.cpu_usage), by: { k8s.pod.name }, filter: { matchesValue(k8s.deployment.name, \"karpenter\") }\n| fieldsAdd value.A = arrayAvg(`avg(dt.kubernetes.container.cpu_usage)`)\n| limit 20","queryConfig":{"version":"11.6.0","subQueries":[{"id":"A","isEnabled":true,"limit":20,"filter":"k8s.deployment.name = karpenter ","datatype":"metrics","metric":{"key":"dt.kubernetes.container.cpu_usage","aggregation":"avg"},"by":["k8s.pod.name"]}]},"subType":"dql-builder-metrics","visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["k8s.pod.name"],"categoryAxisLabel":"k8s.pod.name","valueAxis":["value.A"],"valueAxisLabel":"value.A","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["value.A"],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg(dt.kubernetes.container.cpu_usage)"]},"leftYAxisSettings":{"isLabelVisible":true,"label":"Kubernetes: Container - CPU usage"}},"singleValue":{"showLabel":true,"label":"dt.kubernetes.container.cpu_usage","prefixIcon":"","recordField":"dt.kubernetes.container.cpu_usage","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["avg(dt.kubernetes.container.cpu_usage)"],"value":"sparkline","id":1733218979252}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["k8s.pod.name"],"dataMappings":{"value":"value.A"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"value.A","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["k8s.pod.name"]},"autoSelectVisualization":true},"davis":{},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"27":{"type":"data","title":"","query":"timeseries avg(dt.kubernetes.container.memory_working_set), by: { k8s.pod.name }, filter: { matchesValue(k8s.deployment.name, \"karpenter\") }\n| fieldsAdd value.A = arrayAvg(`avg(dt.kubernetes.container.memory_working_set)`)\n| limit 20","queryConfig":{"version":"11.6.0","subQueries":[{"id":"A","isEnabled":true,"limit":20,"filter":"k8s.deployment.name = karpenter ","datatype":"metrics","metric":{"key":"dt.kubernetes.container.memory_working_set","aggregation":"avg"},"by":["k8s.pod.name"]}]},"subType":"dql-builder-metrics","visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["k8s.pod.name"],"categoryAxisLabel":"k8s.pod.name","valueAxis":["value.A"],"valueAxisLabel":"value.A","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["value.A"],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg(dt.kubernetes.container.memory_working_set)"]},"leftYAxisSettings":{"isLabelVisible":true,"label":"Kubernetes: Container - CPU usage"}},"singleValue":{"showLabel":true,"label":"dt.kubernetes.container.cpu_usage","prefixIcon":"","recordField":"dt.kubernetes.container.cpu_usage","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["avg(dt.kubernetes.container.memory_working_set)"],"value":"sparkline","id":1733219555968}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["k8s.pod.name"],"dataMappings":{"value":"value.A"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"value.A","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["k8s.pod.name"]},"autoSelectVisualization":true},"davis":{},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"28":{"type":"markdown","title":"","content":"**resource usage**"}},"layouts":{"0":{"x":18,"y":14,"w":6,"h":4},"1":{"x":6,"y":0,"w":6,"h":4},"2":{"x":12,"y":0,"w":9,"h":8},"4":{"x":0,"y":14,"w":9,"h":4},"6":{"x":0,"y":13,"w":24,"h":1},"8":{"x":0,"y":18,"w":24,"h":1},"10":{"x":11,"y":19,"w":13,"h":5},"11":{"x":6,"y":4,"w":6,"h":4},"12":{"x":8,"y":8,"w":13,"h":5},"13":{"x":9,"y":14,"w":9,"h":4},"14":{"x":0,"y":4,"w":6,"h":4},"15":{"x":11,"y":24,"w":13,"h":5},"16":{"x":0,"y":19,"w":11,"h":5},"17":{"x":0,"y":24,"w":11,"h":5},"18":{"x":0,"y":37,"w":24,"h":6},"20":{"x":0,"y":8,"w":8,"h":5},"21":{"x":0,"y":36,"w":24,"h":1},"22":{"x":0,"y":0,"w":6,"h":4},"23":{"x":0,"y":30,"w":11,"h":6},"24":{"x":11,"y":30,"w":13,"h":6},"25":{"x":0,"y":29,"w":24,"h":1},"26":{"x":0,"y":44,"w":12,"h":4},"27":{"x":12,"y":44,"w":12,"h":4},"28":{"x":0,"y":43,"w":24,"h":1}},"importedWithCode":false,"settings":{}}